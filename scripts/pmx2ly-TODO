
------
 TODO:
------

- fix indentation (maintain indent variable? insert Indent objects into the stream?)
- pickup for timeline
- accidentals must work through grace time
- movement breaks
- line breaks???
- page breaks???
- afterGrace
- forced accidentals
- handle end of inline tex calls correctly: a '\' on its own
- keep line/column counts into input
- variable number of beams [[ ][ ]]
- segno
- fermata on multimeasure rest (Sinfonia 209, flute, bar 112)

- lyrics: implement some M-Tx macros

- add options:
   - option to follow line breaks
   - option to follow page breaks

- write little validation suite for:
   - multi-voice
   - multi-voice accidentals
   - grace notes, incl multinote graces
   - forced accidentals
   - titles
   - movements
   - (final) bar line(s)
   - every feature and all combinations of features

------
 DONE:
------

- compact multi-measure rests (and skips?) in live voices
- refactor the figured bass so it actually makes a \FiguredBass{ \figuremode{ }}
  ** this is too much work. Keep it as is, with markup, but corrected
- check accidental above note: does it still work after the accidental refactor?
  ** add an Alteration anyway for each oe[snl]
- work-around for continuing ties from M-Tx (weird mix of slurs and non-toggling ties)
- expand \def... sections using tme http://www.astro.indiana.edu/~jthorn/software.html#tme
- expand --- --- sections
- add options:
   - accidental for all octaves or only for explicitly set octaves? This
     is a well-known musical issue
- skips
- bar markups (h and l)
- (final) bar line(s)
- repeats
  Are the manual repeat bars and voltas transformed into lilypond \repeat
  \volta sections, or do we just, easily, retain the manual repeat bars and
  volta indications?
- multibar rests in one voice should give skips in empty other voices
  ** For efficiency, and for ease of programming, this requires refactoring
  so each voice maintains its global time, not bar + time-in-bar.
  * No, I walk the timeline in reverse directory, so it's no longer (so)
  quadratic
- accidentals work for the *staff*, not for just a single voice in the staff.
  ** This requires refactoring the accidental implementation: it must
  live in the staff, not in the voice, and is handled at calculate-time.
- slur start broken again(!)
  * make difference between (a b) and a S b S
- noBeam
- 'relative' accidentals ( :-( )
- titles

-------
 HOWTO:
-------

Create expanded file from mtx-generated pmx file:
$ egrep '^\\\\*def' 02Recit.pmx > 02Recit-defs.pmx
$ egrep -v '^\\\\*def' 02Recit.pmx > 02Recit-nodefs.pmx
$ ~/ftp/generic/tex/tme.perl 02Recit-defs.pmx pg_a4hoch.tex < 02Recit-nodefs.pmx > 02Recit-expanded.pmx
